<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Our Friendship Story</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<style>
  @import url('https://fonts.googleapis.com/css2?family=Handlee&display=swap');

  html, body {
    margin: 0; padding: 0;
    font-family: 'Segoe UI', Arial, sans-serif;
    background: transparent;
    height: 100%;
    overflow-x: hidden;
    color: #43294a;
    min-height: 100vh;
  }
  #flowers-bg, #emoji-bg {
    position: fixed;
    top: 0; left: 0;
    width: 100vw; height: 100vh;
    pointer-events: none;
    user-select: none;
    z-index: -1;
  }
  header {
    text-align: center;
    margin: 40px auto 20px auto;
    position: relative;
    z-index: 10;
  }
  header h1 {
    font-family: 'Handlee', cursive;
    font-size: 2.8em;
    color: #fd759b;
    background: rgba(255, 255, 255, 0.72);
    display: inline-block;
    padding: 12px 42px;
    border-radius: 28px;
    box-shadow: 0 6px 22px rgba(253, 117, 155, 0.33);
    letter-spacing: 1.8px;
  }
  .timeline {
    position: relative;
    max-width: 960px;
    margin: 30px auto 80px auto;
    padding: 20px;
    user-select: none;
    min-height: 1460px;
  }
  .memory-block {
    position: absolute;
    width: 280px;
    border-radius: 22px;
    background: rgba(255, 255, 255, 0.80);
    box-shadow: 0 4px 16px rgba(253, 117, 155, 0.1);
    cursor: pointer;
    transition: box-shadow 0.35s ease;
    backdrop-filter: saturate(180%) blur(12px);
  }
  .memory-block:hover {
    box-shadow: 0 14px 54px rgba(253, 117, 155, 0.35);
  }
  .memory-header {
    display: flex;
    align-items: center;
    padding: 18px 24px;
  }
  .memory-photo {
    width: 82px;
    height: 82px;
    object-fit: cover;
    border-radius: 50%;
    border: 4px solid #fd759b;
    box-shadow: 0 4px 14px #fceef6;
    margin-right: 28px;
    background: #fff;
    transition: filter 0.55s ease;
  }
  .dimmed {
    filter: brightness(0.48) blur(3px);
  }
  .memory-text {
    flex: 1;
  }
  .memory-date {
    font-size: 1.08em;
    color: #e55994;
    font-weight: 700;
    margin-bottom: 4px;
  }
  .memory-title {
    font-size: 1.23em;
    color: #982166;
    font-weight: 800;
    margin-bottom: 8px;
    text-shadow: 0 0 3px rgba(253, 117, 155, 0.3);
  }
  .memory-title, .memory-date {
    font-family: 'Handlee', cursive;
  }

  /* Capsule overlay */
  .capsule-overlay {
    position: fixed;
    top: 50%; left: 50%;
    width: 92vw;
    max-width: 720px;
    max-height: 82vh;
    overflow-y: auto;
    background: rgba(255,255,255,0.97);
    border-radius: 36px;
    box-shadow: 0 16px 48px rgba(253, 117, 155, 0.38);
    transform: translate(-50%, -50%) scale(0.75);
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.45s ease, transform 0.42s cubic-bezier(0.46, 0.03, 0.52, 0.96);
    padding: 42px 52px 56px 52px;
    z-index: 9999;
    font-family: 'Handlee', cursive;
    color: #ad257a;
    font-size: 1.38em;
    line-height: 1.55em;
    white-space: pre-wrap;
  }
  .capsule-overlay.open {
    opacity: 1;
    pointer-events: auto;
    transform: translate(-50%, -50%) scale(1);
  }

  /* Close button for capsule */
  .capsule-close-btn {
    position: fixed;
    top: 26px;
    right: 26px;
    background: #fd759b;
    color: white;
    border: none;
    border-radius: 50%;
    width: 48px; height: 48px;
    font-size: 28px;
    font-weight: bolder;
    cursor: pointer;
    box-shadow: 0 3px 14px #fceef8;
    z-index: 10000;
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.35s ease;
  }
  .capsule-close-btn.visible {
    opacity: 1;
    pointer-events: auto;
  }

  /* Position memory blocks */
  .memory-bond {
    left: 50% !important;
    top: 1440px !important;
    transform: translate(-50%, -50%);
    width: 340px !important;
    box-shadow: 0 14px 56px rgba(253, 117, 155, 0.3);
    z-index: 1015;
  }
  .memory-feelings {
    position: relative !important;
    z-index: 1010 !important;
  }

  /* Photo stack container moved to top and centered */
  .photo-stack-wrapper {
    max-width: 960px;
    margin: 20px auto 40px auto;
    text-align: center;
    position: relative;
    z-index: 5;
  }
  .photo-stack-wrapper h2 {
    font-family: 'Handlee', cursive;
    font-size: 2.4em;
    color: #fd759b;
    margin-bottom: 24px;
    text-shadow: 1px 1px 3px rgba(253, 117, 155, 0.55);
    user-select: none;
  }
  .photo-stack-container {
    width: 350px;
    height: 350px;
    margin: 0 auto;
    position: relative;
    user-select: none;
    cursor: pointer;
  }
  .photo-stack {
    position: relative;
    width: 100%;
    height: 100%;
  }
  .photo-stack img {
    position: absolute;
    width: 340px;
    height: 340px;
    object-fit: cover;
    border-radius: 30px;
    box-shadow: 0 18px 46px rgba(253, 117, 155, 0.45);
    transition: all 0.7s cubic-bezier(0.46, 0.03, 0.52, 0.96);
    user-select: none;
  }

  /* Responsive */
  @media(max-width: 1024px) {
    .timeline {
      height: auto;
      max-width: 90%;
      margin-bottom: 80px;
      min-height: auto;
    }
    .memory-block {
      position: relative !important;
      width: 100% !important;
      margin: 18px 0;
      transform: none !important;
      box-shadow: 0 6px 18px rgba(253, 117, 155, 0.15);
    }
    .memory-bond {
      position: relative !important;
      top: auto !important;
      transform: none !important;
      width: 100% !important;
      margin-bottom: 32px;
      box-shadow: 0 8px 27px rgba(253, 117, 155, 0.20);
      z-index: auto !important;
    }
    .photo-stack-wrapper {
      max-width: 90vw;
      margin-bottom: 48px;
    }
    .photo-stack-container {
      width: 90vw;
      height: auto;
    }
    .photo-stack img {
      position: relative;
      width: 100% !important;
      height: auto !important;
      box-shadow: 0 10px 28px rgba(253, 117, 155, 0.30);
      margin-bottom: -120px;
      border-radius: 20px;
      transition: none;
    }
  }
</style>
</head>
<body>
  <canvas id="flowers-bg"></canvas>
  <canvas id="emoji-bg"></canvas>
  <header><h1>MY Unforgettable MONKEYY</h1></header>

  <div class="photo-stack-wrapper" aria-label="Wishes for birthday and photo stack">
    <h2>HAPPY HAPPIER HAPPIEST BIRTHDAYYYY NISHUUUUUü´∂‚ù§Ô∏èüéÇüéà</h2>
    <div class="photo-stack-container" title="Click photos to cycle">
      <div class="photo-stack" id="photoStack">
        <img src="Nishu/stack1.jpg" style="top: 0px; left: 0px; z-index: 6;" alt="Stack photo 1" />
        <img src="Nishu/stack2.jpg" style="top: 15px; left: 15px; z-index: 5;" alt="Stack photo 2" />
        <img src="Nishu/stack3.jpg" style="top: 30px; left: 30px; z-index: 4;" alt="Stack photo 3" />
        <img src="Nishu/stack4.jpg" style="top: 45px; left: 45px; z-index: 3;" alt="Stack photo 4" />
        <img src="Nishu/stack5.jpg" style="top: 60px; left: 60px; z-index: 2;" alt="Stack photo 5" />
        <img src="Nishu/stack6.jpg" style="top: 75px; left: 75px; z-index: 1;" alt="Stack photo 6" />
      </div>
    </div>
  </div>

  <div class="timeline" aria-label="Friendship memories timeline">

    <!-- Left aligned -->
    <div class="memory-block" style="left: 3%; top: 270px;" data-content="Dear Best Friend,

I will never forget the day i saw you , you were charming in a blue dress when i saw you on first day , The Girl of silence üòÅ (obviously which attracted towards you...heheheüêíü§≠)The first moment i fell for a girl (and last one also *MAYBE*ü§£).">
      <div class="memory-header">
        <img class="memory-photo" src="Nishu/fs.jpg" alt="First day I saw you" />
        <div class="memory-text">
          <div class="memory-date"></div>
          <div class="memory-title">The First Day I Saw You</div>
          <div>I‚Äôll never forget that day üêíü§≠and how much I admired youüò≠üêí.(tap for more)</div>
        </div>
      </div>
    </div>

    <!-- Right aligned -->
    <div class="memory-block" style="right: 4%; top: 290px;" data-content="though we were not friends at first , i was like eager to see you daily , without any other thoughts , even though i knew everything about you , i choose to express myself , since we were not into that understanding level , and also i knew you will say NOOO , i was the happiest person on that day just bcz i got a chance to be your bestfriend atleastüêíü§≠ü´∂...and some time taken for us to be THE BESTFRIENDS was the worst time i say , you know why :) some fights goes on !! , small fights üòäand VERY VERY BIG FIGHTS üíÄüòí, our understanding level was at the peak and the fights we fought , the sorry we said , the moments we choose to remember and moments we made through out almost 1 and a half year , just made our bond THE UNBREAKABLE , and hope we maintain the same leee HUCHAAAAA ü´∂ü§ßüò≠.">
      <div class="memory-header">
        <img class="memory-photo" src="Nishu/journey.jpg" alt="Our journey" />
        <div class="memory-text">
          <div class="memory-date">Present</div>
          <div class="memory-title">Our Journey Together</div>
          <div>From laughter to late-night talks, our inside jokes , the beautiful bond we share. Thank you for making every day magical üêíü§≠ü´∂..</div>
        </div>
      </div>
    </div>

    <!-- Bottom left -->
    <div class="memory-block" style="left: 8%; top: 970px;" data-content="you taught me forgiveness and patience. Our fights only made our bond stronger.Inspite of being my Monkey , you still choose to fight sometimes with me üòí(everytime).. irli irli nodteni nanu....Nin jodi yavag yavag irteni i feel more happy , more alive and many more which i cannot express in just words , i sometimes say that I____ , ning baaaaaal sitt barteti , but as a friend , AS A BESTFRIEND LOVE YOU MONKEYYYYY üêíü´∂....ü§≠sorry!! üêí btw , ning naa sorry kelud andra baal ista alaa? , you dont imagine , ni nan jodi irbek andra nin kade million times sorry kelaku ready adeni naa üêíü´∂ü•π.
">
      <div class="memory-header">
        <img class="memory-photo" src="Nishu/feelings.jpg" alt="When We Fought" />
        <div class="memory-text">
          <div class="memory-date">Our Fights</div>
          <div class="memory-title">When We Fought</div>
          <div>We argued, but always found our way back together.</div>
        </div>
      </div>
    </div>

    <!-- Bottom right -->
    <div class="memory-block" style="right: 6%; top: 1010px;" data-content="Nii ond divas matadod bittra , nang eno missing anisteti... like ni iddra nan jodi , Full kushi irteni , illa andra Full bore , bejar agteti...Never option , always in priority.... Even if ni matadidru , or mund matadod bitruu , Yavagu Ning Cheat madalla... In friendship tooo MY PROMISEEEEEü´∂..... ">
      <div class="memory-header">
        <img class="memory-photo" src="Nishu/last.jpg" />
        <div class="memory-text">
          <div class="memory-date">Special </div>
          <div class="memory-title">Cherished Memories</div>
          <div>Laughing, celebrating, lifting each other up‚Äîforever treasured.I‚Äôll always cherish your talks, and how you understand me so well.</div>
        </div>
      </div>
    </div>

    <!-- My Feelings for You card with high z-index -->
    <div class="memory-block memory-feelings" style="left: 50%; top: 470px; transform: translateX(-50%);" data-content="feelings grow deeper every day. Thank you for being my best friend and sunshine. YOU are MY STRENGTH asta ü´∂.. Like i say everytime , i am not able to imagine that i lose you .... nang 4 years admele nin bitt hogbek ala anta iga yest bejar aagteti gottilla ning , naa ida attachment anth heli?affection anth heli? love anth heli?.... i am not sure but its a special kind of attachment ü§£üêí... jokes apart ...You are part of my life , my hobby , my fav person ü´∂üêí ">
      <div class="memory-header">
        <img class="memory-photo" src="Nishu/stack6.jpg" alt="Feelings for you" />
        <div class="memory-text">
          <div class="memory-date">Now &amp; Always</div>
          <div class="memory-title">My Feelings for You</div>
          <div>You‚Äôre my monkey ü´∂ü§≠and safe place (tap for more).</div>
        </div>
      </div>
    </div>

    <!-- Our Special Bond card placed down -->
    <div class="memory-block memory-bond" data-content="LAST THINGS I WANT TO SAY YOU IS , MY MONKEY .....HAPPY HAPPIER HAPPIEST BIRTHDAY TO YOUüêíü´Çü•≥ü•ÇüéÇüéà , LOVE YOU ü´Ä(as a bestfriend) , LETs ENJOY OUR JOURNEY until the TIME seperate us üò≠ü•π...I hope it never , all lies in our hands and destiny for sure (‚ùÅ¬¥‚ó°`‚ùÅ)....THIS IS A MANDATORY LINE OKAYYYY DONT BECOME ANGRY FOR THIS NOWW PLEASEEEEEEEEEEEEüò≠üò≠üò≠ü´∂">
      <div class="memory-header">
        <img class="memory-photo" style="width: 130px; height: 130px; border-width: 5px;" src="Nishu/moments.jpg" alt="Us in the middle" />
        <div class="memory-text">
          <div class="memory-date">Our Special Bond</div>
          <div class="memory-title">Together in the Middle</div>
          <div>This moment reminds me how fortunate I am to have you by my side through everything. the heart of our friendship, standing strong and happy together.</div>
        </div>
      </div>
    </div>

  </div>

  <div id="capsule" class="capsule-overlay" aria-live="polite" aria-atomic="true"></div>
  <button id="capsuleCloseBtn" class="capsule-close-btn" aria-label="Close capsule">‚úï</button>

<script>
  const canvas = document.getElementById('flowers-bg');
  const ctx = canvas.getContext('2d');
  const emojiCanvas = document.getElementById('emoji-bg');
  const eCtx = emojiCanvas.getContext('2d');

  let width = window.innerWidth;
  let height = window.innerHeight;
  canvas.width = emojiCanvas.width = width;
  canvas.height = emojiCanvas.height = height;

  // Track cursor position for interactive animation
  let cursor = {x: width/2, y: height/2};
  window.addEventListener('mousemove', e => {
    cursor.x = e.clientX;
    cursor.y = e.clientY;
  });

  window.addEventListener('resize', () => {
    width = window.innerWidth;
    height = window.innerHeight;
    canvas.width = emojiCanvas.width = width;
    canvas.height = emojiCanvas.height = height;
  });

  function randomColor() {
    const palettes = [
      ['#ffb7c5', '#fde2e4', '#ff76a1', '#ffedba'],
      ['#d4fc79', '#fff7ae', '#f6d365', '#fda085'],
      ['#c2ffd8', '#ffcad4', '#ffe6e6', '#b5ead7'],
      ['#d0bfff', '#f3c4fb', '#fffcc9', '#fccde2'],
    ];
    let group = palettes[Math.floor(Math.random() * palettes.length)];
    return group[Math.floor(Math.random() * group.length)];
  }

  function randomShape(ctx, x, y, s, color) {
    ctx.save();
    ctx.translate(x, y);
    ctx.rotate(Math.random() * 2 * Math.PI);
    ctx.beginPath();
    const petals = 5 + Math.floor(Math.random() * 3);
    for (let i = 0; i < petals; ++i) {
      ctx.rotate((2 * Math.PI) / petals);
      ctx.ellipse(s, 0, s * 0.5, s, 0, 0, 2 * Math.PI);
    }
    ctx.closePath();
    ctx.globalAlpha = 0.6 + Math.random() * 0.2;
    ctx.fillStyle = color;
    ctx.fill();
    ctx.globalAlpha = 1;
    ctx.restore();
  }

  function Flower() {
    this.x = Math.random() * width;
    this.y = Math.random() * height;
    this.size = 16 + Math.random() * 18;
    this.speed = 0.3 + Math.random() * 0.22;
    this.dir = Math.PI / 2 + (Math.random() - 0.5) * 2.3;
    this.shift = Math.random();
    this.color = randomColor();
    this.spin = Math.random() * 2 * Math.PI;
    this.spinSpeed = 0.002 + Math.random() * 0.002;
    this.opacity = 0.55 + Math.random() * 0.34;
  }
  Flower.prototype.move = function () {
    let dx = cursor.x - this.x;
    let dy = cursor.y - this.y;
    let dist = Math.sqrt(dx*dx + dy*dy);
    const interactRadius = 120;

    // Speed and direction influenced by proximity to cursor
    if(dist < interactRadius) {
      this.speed = 0.9 + Math.random() * 0.7;
      this.spinSpeed = 0.006 + Math.random() * 0.008;

      // Slight random repulsion if cursor very close
      const angleAway = Math.atan2(this.y - cursor.y, this.x - cursor.x);
      this.x += Math.cos(angleAway) * 1.8;
      this.y += Math.sin(angleAway) * 1.8;
    } else {
      this.speed = 0.3 + Math.random() * 0.22;
      this.spinSpeed = 0.002 + Math.random() * 0.002;
    }

    this.x += Math.cos(this.dir + Math.sin(this.shift + Date.now() / 1800)) * this.speed;
    this.y += Math.sin(this.dir + Math.cos(this.shift + Date.now() / 1550)) * this.speed * 0.85;
    this.spin += this.spinSpeed;

    if (this.x < -30) this.x = width + 30;
    if (this.x > width + 30) this.x = -30;
    if (this.y > height + 30) this.y = -30;
    if (this.y < -30) this.y = height + 30;
  };
  Flower.prototype.draw = function (ctx) {
    ctx.save();
    ctx.globalAlpha = this.opacity;
    ctx.translate(this.x, this.y);
    ctx.rotate(this.spin);
    randomShape(ctx, 0, 0, this.size, this.color);
    ctx.restore();
  };

  let flowers = [];
  for (let i = 0; i < Math.floor(window.innerWidth / 50) + 22; ++i) {
    flowers.push(new Flower());
  }

  const emojis = ['‚ù§Ô∏è', 'üêí', 'ü´∂'];
  const emojiParticles = [];

  function EmojiParticle() {
    this.x = Math.random() * width;
    this.y = Math.random() * height;
    this.size = 24 + Math.random() * 18;
    this.speedX = (Math.random() - 0.5) * 0.4;
    this.speedY = (Math.random() - 0.5) * 0.4;
    this.emoji = emojis[Math.floor(Math.random() * emojis.length)];
    this.angle = Math.random() * 2 * Math.PI;
    this.angleSpeed = 0.001 + Math.random() * 0.003;
  }
  EmojiParticle.prototype.move = function () {
    let dx = cursor.x - this.x;
    let dy = cursor.y - this.y;
    let dist = Math.sqrt(dx*dx + dy*dy);
    const interactRadius = 100;

    if(dist < interactRadius) {
      this.speedX = (this.x < cursor.x ? -1 : 1) * (0.5 + Math.random());
      this.speedY = (this.y < cursor.y ? -1 : 1) * (0.5 + Math.random());
      this.angleSpeed = 0.004 + Math.random() * 0.008;
    } else {
      this.speedX = (Math.random() - 0.5) * 0.4;
      this.speedY = (Math.random() - 0.5) * 0.4;
      this.angleSpeed = 0.001 + Math.random() * 0.003;
    }

    this.x += this.speedX;
    this.y += this.speedY;
    this.angle += this.angleSpeed;

    if (this.x > width + 30) this.x = -30;
    if (this.x < -30) this.x = width + 30;
    if (this.y > height + 30) this.y = -30;
    if (this.y < -30) this.y = height + 30;
  };
  EmojiParticle.prototype.draw = function (ctx) {
    ctx.save();
    ctx.font = `${this.size}px serif`;
    ctx.translate(this.x, this.y);
    ctx.rotate(this.angle);
    ctx.fillText(this.emoji, 0, 0);
    ctx.restore();
  };

  for (let i = 0; i < 40; i++) {
    emojiParticles.push(new EmojiParticle());
  }

  function animate() {
    ctx.clearRect(0, 0, width, height);
    flowers.forEach((flower) => {
      flower.move();
      flower.draw(ctx);
    });

    eCtx.clearRect(0, 0, emojiCanvas.width, emojiCanvas.height);
    emojiParticles.forEach((emoji) => {
      emoji.move();
      emoji.draw(eCtx);
    });

    requestAnimationFrame(animate);
  }
  animate();

  // Capsule and card logic
  const capsule = document.getElementById('capsule');
  const closeBtn = document.getElementById('capsuleCloseBtn');
  const cards = document.querySelectorAll('.memory-block');
  const photos = document.querySelectorAll('.memory-photo');

  cards.forEach(card => {
    card.addEventListener('click', () => {
      const content = card.getAttribute('data-content');
      capsule.innerHTML = content;
      capsule.classList.add('open');
      closeBtn.classList.add('visible');
      photos.forEach(photo => photo.classList.add('dimmed'));
      document.body.style.overflow = 'hidden';
    });
  });

  closeBtn.addEventListener('click', () => {
    capsule.classList.remove('open');
    closeBtn.classList.remove('visible');
    photos.forEach(photo => photo.classList.remove('dimmed'));
    document.body.style.overflow = '';
  });

  // Photo stack interactivity
  const photoStack = document.getElementById('photoStack');
  let photosArray = Array.from(photoStack.querySelectorAll('img'));

  photoStack.addEventListener('click', () => {
    let first = photosArray.shift();
    photosArray.push(first);

    photosArray.forEach((photo, index) => {
      photo.style.zIndex = (photosArray.length - index);
      photo.style.top = (index * 15) + 'px';
      photo.style.left = (index * 15) + 'px';
      photo.style.opacity = index === photosArray.length - 1 ? '1' : '0.85';
    });
  });
</script>
</body>
</html>
